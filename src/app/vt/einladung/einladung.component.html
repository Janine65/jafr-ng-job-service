<div class="flex flex-col gap-5">
    <p-card [header]="'vt.bb.einladung.title' | translate">
        <div class="col-12 md:col-6 p-4">
            <div class="flex flex-col gap-4">
                <!-- Description and Example Table -->
                <div class="mb-4">
                    <p class="text-base">
                        {{ 'vt.bb.einladung.description' | translate }}
                        <a (click)="op.toggle($event)" (keydown.enter)="op.toggle($event)" (keydown.space)="op.toggle($event)" tabindex="0" class="cursor-pointer text-primary-500 hover:underline ml-2">{{
                            'common.table.showExampleTable' | translate
                        }}</a>

                        <!-- Example Table Popover -->
                        <p-popover #op>
                            <div class="p-4">
                                <div [innerHTML]="exampleSheetHtml" class="mb-4"></div>
                                <a (click)="downloadExampleSheet()" (keydown.enter)="downloadExampleSheet()" (keydown.space)="downloadExampleSheet()" tabindex="0" class="cursor-pointer text-primary-500 hover:underline flex items-center gap-2">
                                    <i class="pi pi-download"></i>
                                    {{ 'common.actions.downloadExample' | translate }}
                                </a>
                            </div>
                        </p-popover>
                    </p>
                </div>

                <!-- File Upload Component -->
                <app-file-upload (fileSelected)="onFileSelected($event)" [isLoading]="isLoading" iconPath="assets/icons/excel.svg" />

                <!-- Error Display -->
                <p-message *ngIf="validationError" severity="error" [text]="validationError"></p-message>
            </div>
        </div>

        <!-- Progress List Component -->
        <div class="m-4">
            <app-progress-list
                [runningJobs]="runningJobs"
                [completedJobs]="completedJobs"
                [isLoading]="jobsLoading"
                [completedLoading]="completedJobsLoading"
                [config]="progressListConfig"
                [title]="'common.status.runningJobs' | translate"
                (jobDetailsRequested)="onJobDetailsRequested($event)"
            ></app-progress-list>
        </div>
    </p-card>

    <!-- Job Details Card -->
    <syr-job-details *ngIf="showJobDetails" [jobDetails]="currentJobDetails" [isLoading]="loadingJobDetails" (refresh)="onJobDetailsRefreshRequested()"> </syr-job-details>
</div>
