<div class="w-full">
    <p-panel header="{{ 'fuv.police.steps.betrieb' | translate }}" [toggleable]="false">
        <div *ngIf="!betrieb()" class="min-h-[200px] flex items-center justify-center">
            <p-button icon="pi pi-search" [disabled]="viewMode()" (click)="showSearchDialog()" label="{{ 'fuv.police.fuvBetrieb.searchBetrieb' | translate }}"></p-button>
        </div>

        <div *ngIf="betrieb() as selectedBetrieb">
            <!-- Action buttons row -->
            <div class="flex items-center gap-2 mb-4">
                <button pButton type="button" [label]="'common.services.crm' | translate" icon="pi pi-external-link" class="p-button-outlined p-button-sm" (click)="onOpenCrm()"></button>
                <button pButton type="button" [label]="'common.services.syrius' | translate" icon="pi pi-external-link" class="p-button-outlined p-button-sm" (click)="onOpenSyrius()"></button>
                <button pButton type="button" [label]="'common.services.idms' | translate" icon="pi pi-external-link" class="p-button-outlined p-button-sm" (click)="onOpenIdms()"></button>
                <button pButton type="button" [label]="'common.services.crif' | translate" icon="pi pi-external-link" class="p-button-outlined p-button-sm" (click)="onOpenCrif()"></button>
                <button pButton type="button" [label]="'common.services.documents' | translate" icon="pi pi-external-link" class="p-button-outlined p-button-sm" (click)="onOpenDocuments()"></button>
            </div>

            <!-- Visual Delimiter -->
            <div class="border-t border-gray-300 mb-6 mt-4"></div>

            <!-- Company form data -->
            <div class="grid grid-cols-2 gap-8">
                <!-- Left Column -->
                <div class="space-y-4">
                    <!-- Name1 -->
                    <div class="space-y-1">
                        <label for="name1" class="block text-sm font-medium text-gray-600">{{ 'fuv.police.fuvBetrieb.name1' | translate }}</label>
                        <input pInputText id="name1" [value]="selectedBetrieb.name1" disabled class="w-full !bg-gray-50 !cursor-not-allowed" />
                    </div>

                    <!-- Strasse -->
                    <div class="space-y-1">
                        <label class="block text-sm font-medium text-gray-600">{{ 'common.partner.strasse' | translate }}</label>
                        <div class="flex gap-2">
                            <input pInputText [value]="selectedBetrieb.strasse || ''" disabled class="flex-1 !bg-gray-50 !cursor-not-allowed" />
                            <input pInputText [value]="selectedBetrieb.hausnr || ''" disabled class="w-16 !bg-gray-50 !cursor-not-allowed" />
                        </div>
                    </div>

                    <!-- Suva-Nr. -->
                    <div class="space-y-1">
                        <label for="suva-nr" class="block text-sm font-medium text-gray-600">{{ 'common.partner.suvanr' | translate }}</label>
                        <input pInputText id="suva-nr" [value]="selectedBetrieb.suvanr || ''" disabled class="w-full !bg-gray-50 !cursor-not-allowed" />
                    </div>

                    <!-- BonitÃ¤t -->
                    <div class="space-y-1">
                        <label for="bonitat" class="block text-sm font-medium text-gray-600">{{ 'common.partner.bonitaet' | translate }}</label>
                        <input pInputText id="bonitat" [value]="(selectedBetrieb.bonitaet | codeLabel | async) || '-'" disabled class="w-full !bg-gray-50 !cursor-not-allowed" />
                    </div>
                </div>

                <!-- Right Column -->
                <div class="space-y-4">
                    <!-- Name2 -->
                    <div class="space-y-1">
                        <label for="name2" class="block text-sm font-medium text-gray-600">{{ 'fuv.police.fuvBetrieb.name2' | translate }}</label>
                        <input pInputText id="name2" [value]="selectedBetrieb.name2 || ''" disabled class="w-full !bg-gray-50 !cursor-not-allowed" />
                    </div>

                    <!-- PLZ, Ort -->
                    <div class="space-y-1">
                        <label class="block text-sm font-medium text-gray-600">{{ 'fuv.police.fuvBetrieb.plzOrt' | translate }}</label>
                        <div class="flex gap-2">
                            <input pInputText [value]="selectedBetrieb.plz || ''" disabled class="w-20 !bg-gray-50 !cursor-not-allowed" />
                            <input pInputText [value]="selectedBetrieb.ort || ''" disabled class="flex-1 !bg-gray-50 !cursor-not-allowed" />
                        </div>
                    </div>

                    <!-- UID-Nr. -->
                    <div class="space-y-1">
                        <label for="uid-nr" class="block text-sm font-medium text-gray-600">{{ 'common.partner.uidNr' | translate }}</label>
                        <input pInputText id="uid-nr" [value]="selectedBetrieb.uidnr | uidNrFormat" disabled class="w-full !bg-gray-50 !cursor-not-allowed" />
                    </div>

                    <!-- Audit -->
                    <div class="space-y-1">
                        <label for="audit" class="block text-sm font-medium text-gray-600">{{ 'common.partner.audit' | translate }}</label>
                        <input pInputText id="audit" [value]="selectedBetrieb.audit ? ('common.yes' | translate) : ('common.no' | translate)" disabled class="w-full !bg-gray-50 !cursor-not-allowed" />
                    </div>
                </div>
            </div>
        </div>
    </p-panel>
</div>

<p-dialog header="{{ 'fuv.police.fuvBetrieb.searchDialogHeader' | translate }}" [(visible)]="displaySearchDialog" [modal]="true" [style]="{ width: '80vw' }">
    <app-betrieb-search [isDialog]="true" (betriebSelected)="onBetriebSelected($event)"></app-betrieb-search>
</p-dialog>
